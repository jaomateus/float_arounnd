<%# NAVBAR %>
<%= render "shared/navbar" %>

<div class="container">
  <div class="my_floaties_list">
    <% @floaties.each do |floaty| %>

      <%# Retrive city name from coordinates %>
      <% lat = floaty.latitude %>
      <% lon = floaty.longitude %>
      <% lat_lon = "#{lat},#{lon}" %>
      <% response = Geocoder.search(lat_lon).first %>
      <% city =  response.city if response.present?%>

      <div class="my_floaty">
        <% if floaty.photos.attached? %>
          <div class="my_floaty-card">
            <img src=" <%= cl_image_path floaty.photos.first.key %> " class="d-block w-100" alt="...">
          </div>
        <% else %>
          <div class="d" style="background-image: url(<%= cl_image_path floaty.photos.first.key %>)">
          </div>
        <% end %>
        <div class="my_floaties_details">
          <div class="my_floaty_title">
            <%= floaty.title %>
          </div>
          <div class="my_floaty_status">
            <%= floaty.address %>
          </div>
          <div class="my_floaty_location">
            <%= city %>
          </div>
        </div>
      </div>
      <hr class="divider">
    <% end %>
  </div>
</div>
